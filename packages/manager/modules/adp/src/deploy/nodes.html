<div class="mb-3">
    <oui-message data-ng-if="$ctrl.minimumNodesRequired > $ctrl.quota.data.instance.maxInstances" data-type="error">
        <span data-translate="adp_deploy_quota_min_servers_error"
            data-translate-values="{
                numberOfServers: $ctrl.minimumNodesRequired,
                instances: $ctrl.quota.data.instance.maxInstances,
                region: $ctrl.selectedRegion.macroRegion.text + ' (' + $ctrl.selectedRegion.macroRegion.code + ')',
            }">
        </span>&nbsp;
        <a data-ui-sref="iaas.pci-project.compute.quota"
            data-translate="adp_deploy_nodes_quota_increase">
        </a>
    </oui-message>
    <oui-message data-ng-if="$ctrl.minimumNodesRequired <= $ctrl.quota.data.instance.maxInstances" data-type="info">
        <span data-translate="adp_deploy_nodes_quota_msg"
            data-translate-values="{ instances: $ctrl.quota.data.instance.maxInstances, region: $ctrl.selectedRegion.macroRegion.text + ' (' + $ctrl.selectedRegion.macroRegion.code + ')' }"></span>
    </oui-message>
    <div class="row" data-ng-repeat="(nodeType, node) in $ctrl.nodesConfig track by nodeType">
        <div class="col-sm-3 col-xs-12">
            <oui-field data-label="{{ ::'adp_deploy_' + node.type + '_nodes' | translate }}"
                    data-label-popover="{{ ('adp_deploy_' + node.type + '_nodes_help' | translate)
                        + (node.instance_min !== node.instance_max
                            ? ('adp_deploy_nodes_min_max' | translate: {
                                version: $ctrl.selectedCapability.version,
                                minNodes: node.instance_min,
                                maxNodes: node.instance_max
                            })
                            : '') }}">
                <oui-numeric data-ng-if="node.instance_min !== node.instance_max"
                             data-name="{{ node.type + 'NodesCount' }}"
                             data-model="node.count"
                             data-min="node.instance_min"
                             data-max="node.instance_max">
                </oui-numeric>
                <input type="text"
                       class="form-control-plaintext border-0"
                       readonly
                       data-ng-if="node.instance_min === node.instance_max"
                       data-ng-attr-id="{{ node.type + 'NodesCount' }}"
                       data-ng-attr-name="{{ node.type + 'NodesCount' }}"
                       data-ng-model="node.countText">
            </oui-field>
        </div>
        <div class="col-sm-9 col-xs-12">
            <oui-field data-label="{{ ::'adp_deploy_instance_type' | translate }}">
                <oui-select data-name="{{ node.type + 'NodesInstanceType' }}"
                            data-items="node.instance_type"
                            data-group-by="$ctrl.constructor.getFlavorFamily"
                            data-model="node.selectedFlavor"
                            data-placeholder="{{ ::'adp_deploy_flavor_placeholder' | translate }}"
                            data-match="displayName"
                            data-disabled="node.instance_type.length === 1"
                            data-required>
                </oui-select>
            </oui-field>
        </div>
    </div>
</div>
