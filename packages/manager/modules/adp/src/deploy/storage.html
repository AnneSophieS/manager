<div data-ng-if="$ctrl.storage.initialized">
    <!-- HDFS storage -->
    <h4><strong>{{ ::'adp_deploy_storage_cluster_title' | translate }}</strong></h4>
    <p data-translate="adp_deploy_storage_cluster_info"></p>
    <div class="row">
        <div class="col-sm-6 col-xs-12">
            <oui-field data-label="{{ ::'adp_deploy_storage_cluster_label' | translate }}"
                       data-help-text="{{ ::'adp_deploy_storage_cluster_storage_helptext' | translate: {
                        min_storage: $ctrl.storage.min_cluster_storage,
                        max_storage: $ctrl.storage.max_cluster_storage,
                        unit: localizedStorageUnit,
                        } }}"
                       data-error-messages="{ pattern: ('adp_deploy_storage_invalid_entry' | translate) }"
                       data-size="m">
                <div class="oui-input-group">
                    <input class="oui-input oui-input_number"
                           type="number"
                           id="hdfs_effective_storage"
                           name="hdfs_effective_storage"
                           required
                           placeholder="{{ ::'adp_deploy_storage_set_quantity' | translate }}"
                           data-ng-min="{{ ::$ctrl.storage.min_cluster_storage }}"
                           data-ng-max="{{ ::$ctrl.storage.max_cluster_storage }}"
                           data-ng-pattern="/^\d+$/"
                           data-ng-model="$ctrl.storage.hdfs_effective_storage">
                        <button class="oui-button oui-button_icon-only oui-button_small-width"
                                type="button"
                                data-translate="adp_common_unit_gb"
                                disabled>
                    </button>
                </div>
            </oui-field>
        </div>
        <div class="col-sm-6 col-xs-12">
            <dl class="storage-list">
                <dt class="storage-list__term"><span data-translate="adp_deploy_storage_worker_nodes_count"></span> : </dt>
                <dd class="storage-list__definition"><span data-ng-bind="::$ctrl.nodesConfig.worker.count"></span></dd>
                <dt class="storage-list__term"><span data-translate="adp_deploy_storage_per_node"></span> : </dt>
                <dd class="storage-list__definition">
                    <span>
                        {{ ($ctrl.storage.hdfs_effective_storage * $ctrl.selectedCapability.hdfs_replication_factor) / $ctrl.nodesConfig.worker.count }}
                    </span>
                    <span data-translate="adp_common_unit_gb"></span>
                </dd>
                <hr class="storage-list__seperator"/>
                <dt class="storage-list__term"><strong><span data-translate="adp_deploy_storage_total_storage"></span> :</strong></dt>
                <dd class="storage-list__definition pb-1">
                    <strong>
                        <span>
                            {{ $ctrl.storage.hdfs_effective_storage * $ctrl.selectedCapability.hdfs_replication_factor }}
                        </span>
                        <span data-translate="adp_common_unit_gb"></span>
                    </strong>
                    <button type="button"
                            class="oui-popover-button"
                            data-oui-popover="{{ ::'adp_deploy_storage_replication_factor_popover' | translate: {hdfc_replication_factor: $ctrl.selectedCapability.hdfs_replication_factor} }}">
                    </button>
                </dd>
            </dl>
        </div>
    </div>
    <div class="mb-1">
        <dt class="d-inline font-weight-normal" data-translate="adp_deploy_review_hdfs_replication_factor"></dt>
        <span class="ml-1">:</span>
        <dd class="d-inline ml-1" data-ng-bind="$ctrl.selectedCapability.hdfs_replication_factor"></dd>
        <p class="oui-field__helper" data-translate="adp_deploy_storage_hdfs_help"></p>
    </div>
    <!-- edge node storage -->
    <hr class="storage-list__seperator w-100"/>
    <h4><strong>{{ ::'adp_deploy_storage_edge_node_title' | translate }}</strong> </h4>
    <p data-translate="adp_deploy_storage_edge_node_info"></p>
    <div class="row">
        <div class="col-sm-6 col-xs-12">
            <oui-field data-label="{{ ::'adp_deploy_storage_per_edge_node' | translate }}"
                       data-help-text="{{ ::'adp_deploy_storage_cluster_storage_helptext' | translate: {
                        min_storage: $ctrl.storage.min_edge_node_storage,
                        max_storage: $ctrl.storage.max_edge_node_storage,
                        unit: localizedStorageUnit,
                       } }}"
                       data-size="m"
                       data-error-messages="{ pattern: ('adp_deploy_storage_invalid_entry' | translate) }">
                <div class="oui-input-group">
                    <input class="oui-input oui-input_number"
                           type="number"
                           id="hdfs_replication_factor"
                           name="hdfs_replication_factor"
                           required
                           placeholder="{{ ::'adp_deploy_storage_set_quantity' | translate }}"
                           data-ng-model="$ctrl.adp.edge_node_storage"
                           data-ng-pattern="/^\d+$/"
                           data-ng-min="{{ ::$ctrl.storage.min_edge_node_storage }}"
                           data-ng-max="{{ ::$ctrl.storage.max_edge_node_storage }}">
                        <button class="oui-button oui-button_icon-only oui-button_small-width"
                            type="button"
                            data-translate="adp_common_unit_gb"
                            disabled>
                    </button>
                </div>
            </oui-field>
        </div>
        <div class="col-sm-6 col-xs-12">
            <dl class="storage-list">
                <dt class="storage-list__term"><span data-translate="adp_deploy_storage_edge_nodes_count"></span> : </dt>
                <dd class="storage-list__definition"><span data-ng-bind="::$ctrl.nodesConfig.edge.count"></span></dd>
                <dt class="storage-list__term"><strong><span data-translate="adp_deploy_storage_total_effective_storage"></span> :</strong></dt>
                <dd class="storage-list__definition">
                    <strong>
                        <span>
                            {{ $ctrl.adp.edge_node_storage * $ctrl.nodesConfig.edge.count }}
                        </span>
                        <span data-translate="adp_common_unit_gb"></span>
                    </strong>
                </dd>
            </dl>
        </div>
    </div>
</div>
