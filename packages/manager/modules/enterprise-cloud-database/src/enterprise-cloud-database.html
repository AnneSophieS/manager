<div data-ui-view>
    <oui-page-header data-heading="{{ ::'enterprise_cloud_database_title' | translate }}">
    </oui-page-header>
    <div class="container-fluid w-100 h-100 pt-4 px-3 px-md-5">
        <!-- error messages -->
        <cui-message-container data-messages="$ctrl.messages"></cui-message-container>
        <span data-translate="enterprise_cloud_database_description"></span>

        <oui-datagrid class="mt-5" data-page-size="10" data-rows="$ctrl.clusters" data-row-loader="$ctrl.loadRow($row)">
            <oui-column data-title=":: 'enterprise_cloud_database_list_service_name' | translate"
                        data-property="details.name"
                        data-sortable="asc"
                        data-type="string"
                        data-searchable data-filterable></oui-column>
            <oui-column data-title=":: 'enterprise_cloud_database_list_endpoint' | translate" data-property="endpoints">
                <div data-ng-repeat="endpoint in $row.endpoints track by $index">
                    <span data-ng-bind="endpoint.name"></span>:
                    <span data-ng-bind="endpoint.fqdn"></span>:<span data-ng-bind="endpoint.port"></span>
                </div>
            </oui-column>
            <oui-column data-title=":: 'enterprise_cloud_database_list_database_engine' | translate"
                        data-property="details.offerType"
                        data-type="string"
                        data-sortable>
                <span data-ng-bind="$ctrl.DATABASE_CONSTANTS[$row.details.offerType].name + '-' + $row.details.version"></span>
            </oui-column>
            <oui-column data-title=":: 'enterprise_cloud_database_list_region' | translate"
                        data-property="details.regionName"
                        data-type="string"
                        data-sortable></oui-column>
            <oui-column data-title=":: 'enterprise_cloud_database_list_ram_title' | translate"
                        data-property="offer.memory.size"
                        data-type="string"
                        data-sortable>
                <span data-translate="enterprise_cloud_database_list_ram_size" data-translate-values="{ size: $row.offer.memory.size }"></span>
            </oui-column>
            <oui-column data-title=":: 'enterprise_cloud_database_list_storage_title' | translate"
                        data-property="offer.storage.size"
                        data-type="string"
                        data-sortable>
                <span data-translate="enterprise_cloud_database_common_storage_size"
                      data-translate-values="{ size: $row.offer.storage.size, type: $row.offer.storage.type, count:$row.offer.storage.count }">
                </span>
            </oui-column>
            <oui-column data-title=":: 'enterprise_cloud_database_common_status' | translate"
                        data-property="details.status"
                        data-type="string"
                        data-sortable data-filterable data-searchable>
                <span class="oui-status"
                      data-ng-class="'oui-status_' + $ctrl.ENTERPRISE_CLOUD_DATABASE_STATUS_MAP[$row.details.status]"
                      data-ng-bind=":: ('enterprise_cloud_database_common_status_' + $row.details.status) | translate"></span>
            </oui-column>
            <oui-action-menu data-align="end" data-compact>
                <oui-action-menu-item data-on-click="$ctrl.gettingStarted($row.id)">
                    <span data-translate="enterprise_cloud_database_getting_started"></span>
                </oui-action-menu-item>
                <oui-action-menu-item data-on-click="$ctrl.delete($row.id, $row.details.name)"
                                      data-disabled="$ctrl.enterpriseCloudDatabaseService.constructor.isProcessing($row.details.status) || $ctrl.enterpriseCloudDatabaseService.constructor.isError($row.details.status)">
                    <span data-translate="enterprise_cloud_database_common_delete"></span>
                </oui-action-menu-item>
            </oui-action-menu>
            <extra-top>
                <oui-button data-variant="primary" data-on-click="$ctrl.createCluster()">
                    <span data-translate="enterprise_cloud_database_order_new_database"></span>
                </oui-button>
            </extra-top>
        </oui-datagrid>
    </div>
</div>
