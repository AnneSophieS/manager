<div data-ui-view>
    <oui-page-header
        class="mb-2"
        data-heading="{{ ::'enterprise_cloud_database_title' | translate }}">
    </oui-page-header>
    <div class="container-fluid w-100 h-100 pt-4 pb-4 px-3 px-md-5">
        <!-- error messages -->
        <cui-message-container data-messages="$ctrl.messages"></cui-message-container>
        <oui-back-button data-state="enterprise-cloud-database">
            <span data-translate="enterprise_cloud_database_create_title"></span>
        </oui-back-button>
        <p data-translate="enterprise_cloud_database_create_description"></p>
        <form novalidate>
            <section class="choose-database mb-5">
                <h4 data-translate="enterprise_cloud_database_create_choose_db"></h4>
                <p data-translate="enterprise_cloud_database_create_choose_db_desc"></p>
                <enterprise-cloud-database-order-choose-database
                    data-enterprice-db="$ctrl.enterpriceDb"
                    data-databases="$ctrl.databases"
                    data-on-change="$ctrl.onDatabaseSelect(database)">
                </enterprise-cloud-database-order-choose-database>
            </section>
            <section class="choose-region mb-5">
                <h4 data-translate="enterprise_cloud_database_create_choose_dc"></h4>
                <p data-translate="enterprise_cloud_database_create_choose_dc_desc"></p>
                <enterprise-cloud-database-order-choose-region
                    data-enterprice-db="$ctrl.enterpriceDb"
                    data-regions="$ctrl.regions"
                    data-on-change="$ctrl.onRegionSelect(region)">
                </enterprise-cloud-database-order-choose-region>
            </section>
            <section class="choose-cluster mb-5">
                <h4 data-translate="enterprise_cloud_database_create_choose_cluster"></h4>
                <p data-translate="enterprise_cloud_database_create_choose_cluster_desc"></p>
                <h5><span data-translate="enterprise_cloud_database_create_choose_cluster_info"></span>:</h5>
                <ul class="list-unstyled">
                    <li>1 x <span data-translate="enterprise_cloud_database_create_choose_cluster_primary"></span> (Primary)</li>
                    <li>1 x <span data-translate="enterprise_cloud_database_create_choose_cluster_replica"></span> (Replica)</li>
                    <li>1 x <span data-translate="enterprise_cloud_database_create_choose_cluster_backup"></span> (Backup)</li>
                </ul>
                <enterprise-cloud-database-order-choose-cluster-config
                    clusters="$ctrl.capabilities"
                    enterprice-db="$ctrl.enterpriceDb">
                </enterprise-cloud-database-order-choose-cluster-config>
            </section>
            <section class="additional-replica mb-3 clearfix">
                <h4 data-translate="enterprise_cloud_database_create_additional_replicas"></h4>
                <p data-translate="enterprise_cloud_database_create_additional_replicas_desc"></p>
                <oui-select name="replicas"
                    class="col-sm-8 col-md-5 col-lg-4"
                    data-model="$ctrl.enterpriceDb.additionalReplicaCount"
                    placeholder="Select additional replicas ..."
                    data-items="$ctrl.additionalReplicas"
                    data-match="value">
                    <span>{{ $item.value }} Replicas - {{ $item.price }}$ inc.tax/month</span>
                </oui-select>
            </section>
            <section class="choose-commitment mb-5">
                <h4 data-translate="enterprise_cloud_database_create_choose_commitment"></h4>
                <p data-translate="enterprise_cloud_database_create_choose_commitment_desc"></p>
                <enterprise-cloud-database-order-choose-commitment-period
                    enterprice-db="$ctrl.enterpriceDb">
                </enterprise-cloud-database-order-choose-commitment-period>
            </section>
            <section class="choose-payment-type mb-5">
                <h4 data-translate="enterprise_cloud_database_create_choose_payment"></h4>
                <p data-translate="enterprise_cloud_database_create_choose_payment_desc"></p>
                <enterprise-cloud-database-order-choose-payment-period
                    enterprice-db="$ctrl.enterpriceDb">
                </enterprise-cloud-database-order-choose-payment-period>
            </section>
            <section class="order-summary mb-5">
                <h4 data-translate="enterprise_cloud_database_create_order_summary_title"></h4>
                <div data-translate="enterprise_cloud_database_create_order_summary_cluster"
                    data-translate-values="{
                        RAM: $ctrl.enterpriceDb.cluster.memory.size,
                        CPU: $ctrl.enterpriceDb.cluster.cpu.cores,
                        storage: $ctrl.enterpriceDb.cluster.storage.size,
                        storageType: $ctrl.enterpriceDb.cluster.storage.type,
                        storageCount: $ctrl.enterpriceDb.cluster.storage.count 
                    }">
                </div>
                <div data-ng-if="$ctrl.enterpriceDb.additionalReplicaCount"
                    data-translate="enterprise_cloud_database_create_order_summary_replicas"
                    data-translate-values="{
                        additionalReplicaCount: $ctrl.enterpriceDb.additionalReplicaCount ? $ctrl.enterpriceDb.additionalReplicaCount.value : 0
                    }">
                </div>
                <strong><p data-translate="enterprise_cloud_database_create_order_summary_total_price"></p></strong>
            </section>
            <oui-button data-variant="primary" data-on-click="$ctrl.orderDatabaseCluster()">
                <span data-translate="enterprise_cloud_database_create_order_button_label"></span>
            </oui-button>
        </form>
    </div>
</div>
